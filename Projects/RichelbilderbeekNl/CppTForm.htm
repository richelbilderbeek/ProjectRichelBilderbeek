<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
  <title>TForm</title>
  <meta name="description" content="C++ TForm"/>
  <meta name="keywords" content="C++ TForm"/>
  <link rel="stylesheet" href="Richelbilderbeek.css" type="text/css"/>
</head>
<!-- End of head, start of body -->
<body>
<p><a href="index.htm">Go back to Richel Bilderbeek's homepage</a>.</p>
<p><a href="Cpp.htm">Go back to Richel Bilderbeek's C++ page</a>.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<!-- Page header -->
<h1>(<a href="Cpp.htm">C++</a>) <a href="CppTForm.htm">TForm</a></h1>
<p>&nbsp;</p>
<p>VCL data type for a form, the
Component you put all others on. Without any
others on it, it is an empty window. Can be found in the <a
href="CppHeaderFile.htm">header file</a> <b>Forms.hpp</b>.</p>
<p>&nbsp;</p>
<p>For <a href="CppVclCodeSnippets.htm">code snippets</a> using TForm, <a href="CppVclGraphics.htm">go to the VCL graphics code snippets page</a></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>Multiple TForms</h2>
<p>&nbsp;</p>
<p>There are multiple options when you want to develop an application with multiple
forms. You can use Auto-created Forms (default) or create them dynamically
yourself. Also you can choose between using normal Forms or use MDI Parents and
MDI Childs. MDI is an abbreviation for 'Multiple Document Interface'.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3>An Auto-created Form showing another auto-created Form</h3>
<p>&nbsp;</p>
<p>To have multiple (non-parent) TForms in your program, do (using default names):</p>
<p>&nbsp;</p>
<ul>
  <li>Start a new <a href="CppVcl.htm">VCL</a> Application (called Project1 with Unit1 and Form1)</li>
  <li>Create a new Form (called Unit2 and Form2)</li>
  <li>Save all in the same directory under their default names</li>
  <li>Select Form1</li>
  <li>Select 'Project | Add to Project | Unit2.cpp'</li>
  <li>Select 'File | Include Unit Hdr | Unit2'</li>
</ul>
<p>&nbsp;</p>
<p>Now you can type, e.g. under an OnClick event:</p>
<p>&nbsp;</p>
<!-- start of code -->
<table summary="s2l0.2p.cpp" border = "1"><tr><td><code>
Form2-&gt;Show();<br/>
</code></td></tr></table>
<!-- end of the code -->
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3>An Auto-created MDI Form showing another auto-created MDI Child</h3>
<p>&nbsp;</p>
<ul>
  <li>Start a new <a href="CppVcl.htm">VCL</a> Application</li>
  <li>Set the Form Name to FormParent</li>
  <li>Set FormParent's FormStyle to fsMDIForm</li>
  <li>Save this Form as UnitFormParent.cpp</li>
  <li>Create a new Form called FormChild</li>
  <li>Set FormChild's FormStyle to fsMDIChild</li>
  <li>Save this Form as UnitFormChild.cpp</li>
  <li>Select FormParent</li>
  <li>Select 'Project | Add to Project | UnitFormChild.cpp'</li>
  <li>Select 'File | Include Unit Hdr | UnitFormChild'</li>
</ul>
<p>&nbsp;</p>
<p>Now you can type, e.g. under an OnClick event:</p>
<p>&nbsp;</p>
<!-- start of code -->
<table summary="s2l0.2q.cpp" border = "1"><tr><td><code>
FormChild-&gt;Show();<br/>
</code></td></tr></table>
<!-- end of the code -->
<p>&nbsp;</p>
<p>Note that this is not the standard use of an MDI application, as we only have one
single Child, which only has one <a href="CppInstance.htm">instance</a>. But
the Child does have different behaviour compared to standard Forms.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3>An Auto-created MDI Form showing multiple dynamically-created MDI Childs</h3>
<p>&nbsp;</p>
<ul>
  <li>Start a new <a href="CppVcl.htm">VCL</a> Application</li>
  <li>Set the Form Name to FormParent</li>
  <li>Set FormParent's FormStyle to fsMDIForm</li>
  <li>Save this Form as UnitFormParent.cpp</li>
  <li>Create a new Form called FormChild</li>
  <li>Set FormChild's FormStyle to fsMDIChild</li>
  <li>Save this Form as UnitFormChild.cpp</li>
  <li>Select FormParent</li>
  <li>Select 'Project | Add to Project | UnitFormChild.cpp'</li>
  <li>Select 'File | Include Unit Hdr | UnitFormChild'</li>
  <li>Do 'Project | Options | (tab) Forms', then remove 'FormChild' from the Auto-create list</li>
</ul>
<p>&nbsp;</p>
<p>Creating an instance of a Child can be done like this:</p>
<p>&nbsp;</p>
<!-- start of code -->
<table summary="s2l0.2r.cpp" border = "1"><tr><td><code>
 <a href="CppComment.htm">//</a>Somewhere in code of FormParent, e.g. under an OnClick Event<br/>
TFormChild * child <a href="CppOperatorAssign.htm">=</a> <b><a href="CppNew.htm">new</a></b> TFormChild(<b><a href="CppThis.htm">this</a></b>);<br/>
<a href="CppComment.htm">//</a>Code<br/>
<b><a href="CppDelete.htm">delete</a></b> child;<br/>
</code></td></tr></table>
<!-- end of the code -->
<p>&nbsp;</p>
<p>Or using a <a href="CppAuto_ptr.htm">std::auto_ptr</a>:</p>
<p>&nbsp;</p>
<!-- start of code -->
<table summary="s2l0.2r.cpp" border = "1"><tr><td><code>
<a href="CppComment.htm">//</a>Headers<br/>
<a href="CppInclude.htm">#include</a> &lt;<a href="CppMemoryH.htm">memory</a>&gt;<br/>
<br/>
<a href="CppComment.htm">//</a>Somewhere in code of FormParent, e.g. under an OnClick Event<br/>
<a href="CppAuto_ptr.htm">std::auto_ptr</a>&lt;TFormChild&gt; child(<b><a href="CppNew.htm">new</a></b> TFormChild(<b><a href="CppThis.htm">this</a></b>));<br/>
<a href="CppComment.htm">//</a>Code<br/>
</code></td></tr></table>
<!-- end of the code -->
<p>&nbsp;</p>
<p>But this simple code is not enough, as you probably want to keep the Child Forms on
the Parent Form. So you could use a <a href="CppVector.htm">std::vector</a>
storing these child <a href="CppPointer.htm">pointers</a>. I use the <a
href="CppShared_ptr.htm">boost::shared_ptr</a> for this:</p>
<p>&nbsp;</p>
<!-- start of code -->
<table summary="s2l0.2s.cpp" border = "1"><tr><td><code>
<a href="CppComment.htm">//</a>UnitFormParent.h<br/>
<br/>
<a href="CppComment.htm">//</a><a href="CppAdd.htm">Add</a> these headers<br/>
<a href="CppInclude.htm">#include</a> &lt;<a href="CppVectorH.htm">vector</a>&gt;<br/>
<a href="CppInclude.htm">#include</a> &lt;<a href="CppBoost.htm">boost</a>/<a href="CppShared_ptr.htm">shared_ptr</a>&gt;<br/>
<br/>
<a href="CppComment.htm">//</a><a href="CppAdd.htm">Add</a> to the <b><a href="CppPrivate.htm">private</a></b> section of the <b><a href="CppClass.htm">class</a></b> <a href="CppDeclaration.htm">declaration</a>:<br/>
<a href="CppVector.htm">std::vector</a>&lt;<a href="CppShared_ptr.htm">boost::shared_ptr</a>&lt;TFormChild&gt; &gt; mChilds;<br/>
</code></td></tr></table>
<!-- end of the code -->
<p>&nbsp;</p>
<p>Then add to FormParent's definitions:</p>
<p>&nbsp;</p>
<!-- start of code -->
<table summary="s2l0.2t.cpp" border = "1"><tr><td><code>
<a href="CppComment.htm">//</a>A button <b><a href="CppFor.htm">for</a></b> creating a <b><a href="CppNew.htm">new</a></b> Child<br/>
<b><a href="CppVoid.htm">void</a></b> __fastcall TFormMain::ButtonNewClick()<br/>
{<br/>
&nbsp;&nbsp;mChilds.push_back(<a href="CppShared_ptr.htm">boost::shared_ptr</a>&lt;TFormChild&gt;(<b><a href="CppNew.htm">new</a></b> TFormChild(<b><a href="CppThis.htm">this</a></b>)));<br/>
&nbsp;&nbsp;<a href="CppComment.htm">//</a>Optionally: (you'll need to add a Label to the Child)<br/>
&nbsp;&nbsp;mChilds.back()-&gt;Label1-&gt;Caption <a href="CppOperatorAssign.htm">=</a> "Child #" <a href="CppOperatorPlus.htm">+</a> <a href="CppIntToStr.htm">IntToStr</a>(Tag);<br/>
&nbsp;&nbsp;<a href="CppOperatorPlus.htm">+</a>+Tag;<br/>
}<br/>
<br/>
<a href="CppComment.htm">//</a>A button <b><a href="CppFor.htm">for</a></b> removing a Child<br/>
<b><a href="CppVoid.htm">void</a></b> __fastcall TFormMain::ButtonDeleteClick()<br/>
{<br/>
&nbsp;&nbsp;<b><a href="CppIf.htm">if</a></b> (!mChilds.empty()) mChilds.pop_back();<br/>
}<br/>
</code></td></tr></table>
<!-- end of the code -->
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2><a href="CppTFormInTForm.htm">Get a TForm in a TForm</a></h2>
<p>&nbsp;</p>
<p>You can get a TForm in a TForm as if it were a TPanel. <a href="CppTFormInTForm.htm">Go to the page 'Get a TForm in a TForm'</a>.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>Transparency</h2>
<p>&nbsp;</p>
<p>Making a Form transparent is easy. First set the AlphaBlend property to true.
Then the AlphaBlendValue determines the transparency. An AlphaBlendValue
of 0 denotes total transparence (you won't see it anymore), an AlphaBlendValue
of 255 denotes the standard non-transparency.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>TForm troubles</h2>
<p>&nbsp;</p>
<p>Never change the TForm <a href="CppConstructor.htm">constructor</a> to the following:</p>
<p></p>
<!-- start of code -->
<table summary="s2l0.2u.cpp" border = "1"><tr><td><code>
__fastcall TFormParent::TFormParent(T<a href="CppComponent.htm">Component</a>* Owner, <b><a href="CppConst.htm">const</a></b> <b><a href="CppInt.htm">int</a></b> i) <a href="CppComment.htm">//</a>Don't <b><a href="CppDo.htm">do</a></b> <b><a href="CppThis.htm">this</a></b>!<br/>
&nbsp;&nbsp;: TForm(Owner)<br/>
<a href="CppComment.htm">//</a>Rest of the code<br/>
{<br/>
&nbsp;&nbsp;<a href="CppComment.htm">//</a>Rest of the code<br/>
}<br/>
</code></td></tr></table>
<!-- end of the code -->
<p>&nbsp;</p>
<p>This will (strangely) result in a <a href="CppStackOverflow.htm">stack overflow</a>.</p>
<p>&nbsp;</p>
<p>One workaround is to use <a href="CppAnsiString.htm">AnsiString</a> instead of an <a href="CppInt.htm">integer</a>:</p>
<p>&nbsp;</p>
<!-- start of code -->
<table summary="s2l0.30.cpp" border = "1"><tr><td><code>
__fastcall TFormParent::TFormParent(T<a href="CppComponent.htm">Component</a>* Owner, <b><a href="CppConst.htm">const</a></b> <a href="CppAnsiString.htm">AnsiString</a> i)<br/>
&nbsp;&nbsp;: TForm(Owner)<br/>
<a href="CppComment.htm">//</a>Rest of the code<br/>
{<br/>
<a href="CppComment.htm">//</a>Rest of the code<br/>
}<br/>
</code></td></tr></table>
<!-- end of the code -->
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><a href="Cpp.htm">Go back to Richel Bilderbeek's C++ page</a>.</p>
<p><a href="index.htm">Go back to Richel Bilderbeek's homepage</a>.</p>
<p>&nbsp;</p>
<p><a href="http://validator.w3.org/check?uri=referer"><img src="valid-xhtml10.png" alt="Valid XHTML 1.0 Strict" height="31" width="88" /></a></p>
</body>
</html>
